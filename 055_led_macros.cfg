#led macros

[gcode_macro CASE_CAMERA]
gcode:
    SET_LED LED=case_light RED=0.5 GREEN=0.5 BLUE=0.5 TRANSMIT=1

[gcode_macro CASE_WHITE]
gcode:
    SET_LED LED=case_light RED=1.0 GREEN=1.0 BLUE=1.0 TRANSMIT=1

[gcode_macro CASE_RED]
gcode:
    SET_LED LED=case_light RED=1.0 GREEN=0.0 BLUE=0.0 TRANSMIT=1

[gcode_macro CASE_GREEN]
gcode:
    SET_LED LED=case_light RED=0.0 GREEN=1.0 BLUE=0.0 TRANSMIT=1

[gcode_macro CASE_BLUE]
gcode:
    SET_LED LED=case_light RED=0.0 GREEN=0.0 BLUE=1.0 TRANSMIT=1

[gcode_macro CASE_BLACK]
gcode:
    SET_LED LED=case_light RED=0.0 GREEN=0.0 BLUE=0.0 TRANSMIT=1

[gcode_macro CASE_FLASH_WHITE]
gcode:
  {% for i in range(4) %}
    SET_LED LED=Pixel RED=0.5 GREEN=0.5 BLUE=0.5 TRANSMIT=1
    G4 P100
    SET_LED LED=Pixel RED=0.0 GREEN=0.0 BLUE=0.0 TRANSMIT=1
    G4 P100
  {% endfor %}

[gcode_macro CASE_FLASH_RED]
gcode:
  {% for i in range(4) %}
    SET_LED LED=Pixel RED=0.5 GREEN=0.0 BLUE=0.0 TRANSMIT=1
    G4 P100
    SET_LED LED=Pixel RED=0.0 GREEN=0.0 BLUE=0.0 TRANSMIT=1
    G4 P100
  {% endfor %}

[gcode_macro CASE_FLASH_GREEN]
gcode:
  {% for i in range(4) %}
    SET_LED LED=Pixel RED=0.0 GREEN=0.5 BLUE=0.0 TRANSMIT=1
    G4 P100
    SET_LED LED=Pixel RED=0.0 GREEN=0.0 BLUE=0.0 TRANSMIT=1
    G4 P100
  {% endfor %}

[gcode_macro CASE_FLASH_BLUE]
gcode:
  {% for i in range(4) %}
    SET_LED LED=Pixel RED=0.0 GREEN=0.0 BLUE=0.5 TRANSMIT=1
    G4 P100
    SET_LED LED=Pixel RED=0.0 GREEN=0.0 BLUE=0.0 TRANSMIT=1
    G4 P100
  {% endfor %}

[gcode_macro CASE_RAINBOW]
gcode:
  set r_offset = 0
  set g_offset = 127
  set b_offset = 255

  {% for i in range(255) %}
    r = r_offset + i
    g = g_offset + i
    b = b_offset + i

    {% if r > 255 }
      r = r - 255
    {% endif %}

    {% if g > 255 }
      g = g - 255
    {% endif %}

    {% if b > 255 }
      b = b - 255
    {% endif %}

    SET_LED LED=Pixel RED={r} GREEN={g} BLUE={b} TRANSMIT=1
  {% endfor %}

[gcode_macro CASE_PIXEL_RAINBOW]
gcode:
  set runcount = 10
  set pixels = 20
  set r_offset = 0
  set g_offset = 127
  set b_offset = 255
  set p_offset = 255/pixels

  {% for i in range(runcount) %}
    {% for ii in range(255) %}
      r = r_offset + ii
      g = g_offset + ii
      b = b_offset + ii
      {% for iii in range(pixels) %}
        r = r + iii*p_offset
        g = g + iii*p_offset
        b = b + iii*p_offset

        {% if r > 255 }
          r = r - 255
        {% else %}
          r = r/255
        {% endif %}

        {% if g > 255 }
          g = (g - 255)/255
        {% else %}
          g = g/255
        {% endif %}

        {% if b > 255 }
          b = b - 255
        {% else %}
          b = b/255
        {% endif %}

        {% if iii < pixels %}
          SET_LED LED=Pixel RED={r} GREEN={g} BLUE={b} INDEX=iii TRANSMIT=0
        {% else %}
          SET_LED LED=Pixel RED={r} GREEN={g} BLUE={b} INDEX=iii TRANSMIT=1
        {% endif %}
  {% endfor %}